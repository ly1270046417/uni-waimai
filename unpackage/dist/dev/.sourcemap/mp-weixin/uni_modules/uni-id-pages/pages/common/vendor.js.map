{"version":3,"sources":["uni-app:///uni_modules/uni-id-pages/common/login-page.mixin.js","uni-app:///uni_modules/uni-id-pages/pages/register/validator.js","uni-app:///uni_modules/uni-id-pages/common/password.js"],"names":["mixin","data","config","uniIdRedirectUrl","isMounted","onUnload","mounted","this","onLoad","e","is_weixin_redirect","uni","showLoading","mask","window","location","href","includes","paramsArr","split","forEach","item","arr","code","$nextTick","n","$refs","uniFabLogin","login","decodeURIComponent","getCurrentPages","length","hideHomeButton","console","log","computed","needAgreements","agreements","agree","get","isAgree","set","methods","loginSuccess","mutations","required","errorMessage","minLength","maxLength","validateFunction","rule","value","callback","test","passwordMod","getPwdRules","passwordStrength","passwordRules","super","strong","medium","weak","ERROR","normal","noPwd","noRePwd","rePwdErr","passwordStrengthError","validPwd","password","RegExp","pwdName","rePwdName","rules","checkRes"],"mappings":"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","file":"uni_modules/uni-id-pages/pages/common/vendor.js","sourcesContent":["import {\r\n\t\tstore,\r\n\t\tmutations\r\n\t} from '@/uni_modules/uni-id-pages/common/store.js'\r\nimport config from '@/uni_modules/uni-id-pages/config.js'\r\nlet mixin = {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tconfig,\r\n\t\t\tuniIdRedirectUrl: '',\r\n\t\t\tisMounted: false\r\n\t\t}\r\n\t},\r\n\tonUnload() {\r\n\r\n\r\n\r\n\t},\r\n\tmounted() {\r\n\t\tthis.isMounted = true;\r\n\t},\r\n\tonLoad(e) {\r\n\t\tif (e.is_weixin_redirect) {\r\n\t\t\tuni.showLoading({\r\n\t\t\t\tmask: true\r\n\t\t\t})\r\n\r\n\t\t\tif( window.location.href.includes('#') ){\r\n\t\t\t\t// 将url通过 ? 分割获取后面的参数字符串 再通过 & 将每一个参数单独分割出来\r\n\t\t\t\tlet paramsArr = window.location.href.split('?')[1].split('&')\r\n\t\t\t\tparamsArr.forEach(item=>{\r\n\t\t\t\t\tlet arr = item.split('=')\r\n\t\t\t\t\tif(arr[0] == 'code'){\r\n\t\t\t\t\t\te.code = arr[1]\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.$nextTick(n => {\r\n\t\t\t\t// console.log(this.$refs.uniFabLogin);\r\n\t\t\t\tthis.$refs.uniFabLogin.login({\r\n\t\t\t\t\tcode:e.code\r\n\t\t\t\t}, 'weixin')\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tif (e.uniIdRedirectUrl) {\r\n\t\t\tthis.uniIdRedirectUrl = decodeURIComponent(e.uniIdRedirectUrl)\r\n\t\t}\r\n\t\t\r\n\t\tif(getCurrentPages().length === 1){\r\n\t\t\tuni.hideHomeButton()\r\n\t\t\tconsole.log('已隐藏：返回首页按钮');\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tneedAgreements() {\r\n\t\t\tif (this.isMounted) {\r\n\t\t\t\tif (this.$refs.agreements) {\r\n\t\t\t\t\treturn this.$refs.agreements.needAgreements\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tagree: {\r\n\t\t\tget() {\r\n\t\t\t\tif (this.isMounted) {\r\n\t\t\t\t\tif (this.$refs.agreements) {\r\n\t\t\t\t\t\treturn this.$refs.agreements.isAgree\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tset(agree) {\r\n\t\t\t\tif (this.$refs.agreements) {\r\n\t\t\t\t\tthis.$refs.agreements.isAgree = agree\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log('不存在 隐私政策协议组件');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tloginSuccess(e) {\r\n\t\t\tmutations.loginSuccess({\r\n\t\t\t\t...e,\r\n\t\t\t\tuniIdRedirectUrl: this.uniIdRedirectUrl\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\nexport default mixin\r\n","import passwordMod from '@/uni_modules/uni-id-pages/common/password.js'\r\nexport default {\r\n\t\"username\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\trequired: true,\r\n\t\t\t\terrorMessage: '请输入用户名',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tminLength: 3,\r\n\t\t\t\tmaxLength: 32,\r\n\t\t\t\terrorMessage: '用户名长度在 {minLength} 到 {maxLength} 个字符',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalidateFunction: function(rule, value, data, callback) {\r\n\t\t\t\t\t// console.log(value);\r\n\t\t\t\t\tif (/^1\\d{10}$/.test(value) || /^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/.test(value)) {\r\n\t\t\t\t\t\tcallback('用户名不能是：手机号或邮箱')\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (/^\\d+$/.test(value)) {\r\n\t\t\t\t\t\tcallback('用户名不能为纯数字')\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif(/[\\u4E00-\\u9FA5\\uF900-\\uFA2D]{1,}/.test(value)){\r\n\t\t\t\t\t\tcallback('用户名不能包含中文')\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"label\": \"用户名\"\r\n\t},\r\n\t\"nickname\": {\r\n\t\t\"rules\": [{\r\n\t\t\t\tminLength: 3,\r\n\t\t\t\tmaxLength: 32,\r\n\t\t\t\terrorMessage: '昵称长度在 {minLength} 到 {maxLength} 个字符',\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalidateFunction: function(rule, value, data, callback) {\r\n\t\t\t\t\t// console.log(value);\r\n\t\t\t\t\tif (/^1\\d{10}$/.test(value) || /^(\\w-*\\.*)+@(\\w-?)+(\\.\\w{2,})+$/.test(value)) {\r\n\t\t\t\t\t\tcallback('昵称不能是：手机号或邮箱')\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (/^\\d+$/.test(value)) {\r\n\t\t\t\t\t\tcallback('昵称不能为纯数字')\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif(/[\\u4E00-\\u9FA5\\uF900-\\uFA2D]{1,}/.test(value)){\r\n\t\t\t\t\t\tcallback('昵称不能包含中文')\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t],\r\n\t\t\"label\": \"昵称\"\r\n\t},\r\n\t...passwordMod.getPwdRules()\r\n}\r\n","// 导入配置\r\nimport config from '@/uni_modules/uni-id-pages/config.js'\r\n\r\nconst {passwordStrength} = config\r\n\r\n// 密码强度表达式\r\nconst passwordRules = {\r\n\t// 密码必须包含大小写字母、数字和特殊符号\r\n\tsuper: /^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~!@#$%^&*_\\-+=`|\\\\(){}[\\]:;\"'<>,.?/])[0-9a-zA-Z~!@#$%^&*_\\-+=`|\\\\(){}[\\]:;\"'<>,.?/]{8,16}$/,\r\n\t// 密码必须包含字母、数字和特殊符号\r\n\tstrong: /^(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[~!@#$%^&*_\\-+=`|\\\\(){}[\\]:;\"'<>,.?/])[0-9a-zA-Z~!@#$%^&*_\\-+=`|\\\\(){}[\\]:;\"'<>,.?/]{8,16}$/,\r\n\t// 密码必须为字母、数字和特殊符号任意两种的组合\r\n\tmedium: /^(?![0-9]+$)(?![a-zA-Z]+$)(?![~!@#$%^&*_\\-+=`|\\\\(){}[\\]:;\"'<>,.?/]+$)[0-9a-zA-Z~!@#$%^&*_\\-+=`|\\\\(){}[\\]:;\"'<>,.?/]{8,16}$/,\r\n\t// 密码必须包含字母和数字\r\n\tweak: /^(?=.*[0-9])(?=.*[a-zA-Z])[0-9a-zA-Z~!@#$%^&*_\\-+=`|\\\\(){}[\\]:;\"'<>,.?/]{6,16}$/\r\n}\r\n\r\nconst ERROR = {\r\n\tnormal: {\r\n\t\tnoPwd: '请输入密码',\r\n\t\tnoRePwd: '再次输入密码',\r\n\t\trePwdErr: '两次输入密码不一致'\r\n\t},\r\n\tpasswordStrengthError: {\r\n\t\tsuper: '密码必须包含大小写字母、数字和特殊符号，密码长度必须在8-16位之间',\r\n\t\tstrong: '密码必须包含字母、数字和特殊符号，密码长度必须在8-16位之间',\r\n\t\tmedium: '密码必须为字母、数字和特殊符号任意两种的组合，密码长度必须在8-16位之间',\r\n\t\tweak: '密码必须包含字母，密码长度必须在6-16位之间'\r\n\t}\r\n}\r\n\r\nfunction validPwd(password) {\r\n\t//强度校验\r\n\tif (passwordStrength && passwordRules[passwordStrength]) {\r\n\t\tif (!new RegExp(passwordRules[passwordStrength]).test(password)) {\r\n\t\t\treturn ERROR.passwordStrengthError[passwordStrength]\r\n\t\t}\r\n\t}\r\n\treturn true\r\n}\r\n\r\nfunction getPwdRules(pwdName = 'password', rePwdName = 'password2') {\r\n\tconst rules = {}\r\n\trules[pwdName] = {\r\n\t\trules: [{\r\n\t\t\t\trequired: true,\r\n\t\t\t\terrorMessage: ERROR.normal.noPwd,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalidateFunction: function(rule, value, data, callback) {\r\n\t\t\t\t\tconst checkRes = validPwd(value)\r\n\t\t\t\t\tif (checkRes !== true) {\r\n\t\t\t\t\t\tcallback(checkRes)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t}\r\n\r\n\tif (rePwdName) {\r\n\t\trules[rePwdName] = {\r\n\t\t\trules: [{\r\n\t\t\t\t\trequired: true,\r\n\t\t\t\t\terrorMessage: ERROR.normal.noRePwd,\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tvalidateFunction: function(rule, value, data, callback) {\r\n\t\t\t\t\t\tif (value != data[pwdName]) {\r\n\t\t\t\t\t\t\tcallback(ERROR.normal.rePwdErr)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t}\r\n\treturn rules\r\n}\r\n\r\nexport default {\r\n\tERROR,\r\n\tvalidPwd,\r\n\tgetPwdRules\r\n}\r\n"],"sourceRoot":""}