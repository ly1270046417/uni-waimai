(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["page-store/store/index"],{251:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26),n(27);o(n(25));var i=o(n(252));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},252:function(t,e,n){"use strict";n.r(e);var o=n(253),i=n(255);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n(257);var a,s=n(78),c=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);c.options.__file="page-store/store/index.vue",e["default"]=c.exports},253:function(t,e,n){"use strict";n.r(e);var o=n(254);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},254:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return a})),n.d(e,"recyclableRender",(function(){return r})),n.d(e,"components",(function(){return o}));try{o={uIcon:function(){return n.e("node-modules/uview-ui/components/u-icon/u-icon").then(n.bind(null,465))},uPopup:function(){return n.e("node-modules/uview-ui/components/u-popup/u-popup").then(n.bind(null,472))},uModal:function(){return n.e("node-modules/uview-ui/components/u-modal/u-modal").then(n.bind(null,479))},uToast:function(){return n.e("node-modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,486))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement,n=(t._self._c,0==t.activeTabIndex?t.__map(t.shopDetailList,(function(e,n){var o=t.__get_orig(e),i=t.goodCartNum(e.id),r=t.goodCartNum(e.id),a=t.goodCartNum(e.id);return{$orig:o,m0:i,m1:r,m2:a}})):null),o=0==t.activeTabIndex?t.__map(t.cart,(function(e,n){var o=t.__get_orig(e),i=t.goodCartNum(e.id),r=t.goodCartNum(e.id),a=t.goodCartNum(e.id);return{$orig:o,m3:i,m4:r,m5:a}})):null;t.$mp.data=Object.assign({},{$root:{l0:n,l1:o}})},r=!1,a=[];i._withStripped=!0},255:function(t,e,n){"use strict";n.r(e);var o=n(256),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},256:function(t,e,n){"use strict";(function(t,o){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n(28)),a=i(n(11)),s=i(n(30)),c=n(66);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={data:function(){return{titleStyle:{float:"left"},cancelStyle:{float:"right"},confirmStyle:{float:"left",width:"200rpx"},collection:!1,addShopTF:!0,number:0,form:{id:"",name:"",user_id:"",headImg:"",phone:"18637815946",time:"10:00~22:00",address:"深证市罗湖区翠竹路1052号102室",type:"水果生鲜",minPrice:"100"},activeList:[{title:"点餐",value:"d"},{title:"商家",value:"s"}],shopBarTitleList:[],downloadUrlParams:{type:"commodity",commodityName:"apple.png"},downloadUrl:"",activeTabIndex:"",shopBarTitleIndex:"",showShopCarModel:!1,showCartEntry:!1,shopDetailListTile:"",shopDetailList:[],shopCarTip:"未选购商品",cart:[]}},onShow:function(){},onLoad:function(t){this.activeTabIndex=0,this.shopBarTitleIndex=0,console.log(JSON.stringify(t)+"详情页面接收--"+t.id),this.form.id=t.id,this.form.name=t.name,this.form.headImg=t.headImg,this.form.user_id=t.user_id,this.loadStoreBar()},onNavigationBarSearchInputClicked:function(){t.navigateTo({url:"../index/search",animationType:"pop-in",animationDuration:2e3})},watch:{activeTabIndex:function(){var t=(0,s.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=this.activeList[e].value,t.next=3,this.getForm(n);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),shopBarTitleIndex:function(){var t=(0,s.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.shopDetailListTile=this.shopBarTitleList[e].title,n=this.shopBarTitleList[e].value,t.next=4,this.getShopBarTitleList(n);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},computed:l(l({},(0,c.mapState)(["orderType","address","store"])),{},{goTitle:function(){return this.disabledPay?"¥"+this.form.minPrice+"起送":"去结算"},goodCartNum:function(){var t=this;return function(e){return t.cart.reduce((function(t,n){return n.id===e?t+n.number:t}),0)}},getCartGoodsNumber:function(){return this.cart.reduce((function(t,e){return t+e.number}),0)},getCartGoodsPrice:function(){return this.cart.reduce((function(t,e){return t+e.number*e.price}),0)},disabledPay:function(){return this.getCartGoodsPrice<this.form.minPrice},spread:function(){return parseFloat((this.form.minPrice-this.getCartGoodsPrice).toFixed(2))}}),methods:{handleTab:function(t){this.activeTabIndex=t},shopBarTitleClick:function(t){this.shopBarTitleIndex=t,this.shopDetailListTile=this.shopBarTitleList[t].title,this.loadCommodityList()},getForm:function(t){return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("获取"+t+"表单");case 1:case"end":return e.stop()}}),e)})))()},getShopBarTitleList:function(t){return(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("获取"+t+"商品种类");case 1:case"end":return e.stop()}}),e)})))()},loadStoreBar:function(){var t=this;o.callFunction({name:"initIndex",data:{index:"storeBar",parent_id:this.form.id},success:function(e){console.log(e),t.shopBarTitleList=e.result.data,t.loadCommodityList()},fail:function(t){console.log(t)},complete:function(){}})},loadCommodityList:function(){var t=this;o.callFunction({name:"initIndex",data:{category_id:this.shopBarTitleList[this.shopBarTitleIndex]._id},success:function(e){console.log(e),t.shopDetailList=e.result.data},fail:function(t){console.log(t)},complete:function(){}})},loadCommodityImage:function(){var t=this;o.callFunction({name:"dowloadImage",data:{category_id:"63f46c4be1a35c8785e51856"},success:function(e){console.log(e);var n=e.result.data;for(var o in n)t.shopDetailList[o].goods_thumb=n[o].url},fail:function(t){console.log(t)},complete:function(){}})},collectionClick:function(){this.collection=!this.collection,this.collection?this.$refs.uToast.show({title:"收藏成功",type:"success",position:"top",duration:"500"}):this.$refs.uToast.show({title:"取消收藏",type:"warning",position:"top",duration:"500"})},toReportClick:function(){this.$refs.uToast.show({title:"举报成功",type:"success",position:"center",duration:"500"})},addShopClick:function(t,e){var n=this.cart.findIndex((function(e){return e.id===t.id}));n>-1?this.cart[n].number+=e:this.cart.push({id:t.id,name:t.name,price:t.price,number:e,type:t.type})},reducShopClick:function(t){var e=this.cart.findIndex((function(e){return e.id===t.id}));this.cart[e].number-=1,this.cart[e].number<=0&&this.cart.splice(e,1),this.getCartGoodsNumber},goPay:function(){t.showLoading({title:"加载中"}),t.setStorageSync("cart",JSON.parse(JSON.stringify(this.cart))),t.navigateTo({url:"./pay",animationType:"pop-in",animationDuration:2e3}),t.hideLoading()},showShopCarModelClick:function(){this.showShopCarModel=!this.showShopCarModel&&this.getCartGoodsNumber>0},emptyClick:function(){this.showCartEntry=!0},cartEntry:function(){console.log("实际清空购物车操作-----"),this.cart=[],this.showCartEntry=!1,this.showShopCarModel=!1},noCartEntry:function(){this.showCartEntry=!1}}};e.default=d}).call(this,n(2)["default"],n(27)["default"])},257:function(t,e,n){"use strict";n.r(e);var o=n(258),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);e["default"]=i.a},258:function(t,e,n){}},[[251,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/page-store/store/index.js.map