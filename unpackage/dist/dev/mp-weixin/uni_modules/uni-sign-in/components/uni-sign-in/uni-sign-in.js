(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in"],{282:function(n,e,t){"use strict";t.r(e);var r=t(283),o=t(285);for(var i in o)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(i);t(288);var s,a=t(78),u=Object(a["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],s);u.options.__file="uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in.vue",e["default"]=u.exports},283:function(n,e,t){"use strict";t.r(e);var r=t(284);t.d(e,"render",(function(){return r["render"]})),t.d(e,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(e,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(e,"components",(function(){return r["components"]}))},284:function(n,e,t){"use strict";var r;t.r(e),t.d(e,"render",(function(){return o})),t.d(e,"staticRenderFns",(function(){return s})),t.d(e,"recyclableRender",(function(){return i})),t.d(e,"components",(function(){return r}));try{r={uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,397))},uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,295))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var n=this,e=n.$createElement,t=(n._self._c,n.signInRes.days.length),r=n.__map(n.weekdays,(function(e,t){var r=n.__get_orig(e),o=n.signInRes.days.includes(e-1),i=n.signInRes.days.includes(e-1)||e>n.signInRes.n;return{$orig:r,g1:o,g2:i}}));n.$mp.data=Object.assign({},{$root:{g0:t,l0:r}})},i=!1,s=[];o._withStripped=!0},285:function(n,e,t){"use strict";t.r(e);var r=t(286),o=t.n(r);for(var i in r)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(i);e["default"]=o.a},286:function(n,e,t){"use strict";(function(n,r){var o=t(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(t(28)),s=o(t(30)),a=o(t(287)),u=n.database(),c=u.action("signIn").collection("opendb-sign-in"),d=(new Date((new Date).toLocaleDateString()).getTime(),{name:"uni-signIn",data:function(){return{total:0,scores:0,weekdays:[1,2,3,4,5,6,7],signInRes:{days:[],n:0}}},mounted:function(){},methods:{getSignedInInfo:function(){var n=arguments,e=this;return(0,s.default)(i.default.mark((function t(){var o,s,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=n.length>0&&void 0!==n[0]?n[0]:"今日已签过",s=new Date((new Date).toLocaleDateString()).getTime(),t.next=4,c.where("'user_id' == $env.uid && 'date' == ".concat(s," && 'isDelete' == false")).get();case 4:return a=t.sent,a.result.data.length&&(e.signInRes=a.result,e.$refs.popup.open(),r.showToast({title:o,duration:3e3,icon:"none"})),t.abrupt("return",a.result.data);case 7:case"end":return t.stop()}}),t)})))()},showRewardedVideoAd:function(){var e=this;return(0,s.default)(i.default.mark((function t(){var o,u;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getSignedInInfo();case 2:if(o=t.sent,console.log(o),!o||0!=o.length){t.next=9;break}if(u=n.getCurrentUserInfo().uid,u){t.next=8;break}return t.abrupt("return",r.navigateTo({url:"/pages/ucenter/login-page/index/index"}));case 8:a.default.show({adpid:1733738477,adType:"RewardedVideo",urlCallback:{userId:u,extra:"uniSignIn"}},(function(n){if(n&&n.isEnded){console.log("onClose "+n.isEnded);var t=0;r.showLoading({mask:!0});var o=setInterval(function(){var a=(0,s.default)(i.default.mark((function s(a){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return t++,i.next=3,e.getSignedInInfo("签到成功");case 3:n=i.sent,(t>2||n.length)&&(n.length||r.showToast({title:"签到失败！",icon:"error",duration:6e3}),clearInterval(o),r.hideLoading());case 5:case"end":return i.stop()}}),s)})));return function(n){return a.apply(this,arguments)}}(),2e3)}else console.log("onClose "+n.isEnded),r.showToast({title:"播放中途退出,签到失败！",icon:"error",duration:5e3})}),(function(n){console.log(n),r.showToast({title:n.errMsg,icon:"none"})}));case 9:case"end":return t.stop()}}),t)})))()},open:function(){var n=this;return(0,s.default)(i.default.mark((function e(){var t,o;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.showLoading({mask:!0}),e.prev=1,e.next=4,n.getSignedInInfo();case 4:if(t=e.sent,!t||0!=t.length){e.next=14;break}return e.next=8,c.add({});case 8:o=e.sent,console.log(o),r.hideLoading(),n.signInRes=o.result,n.$refs.popup.open(),7==n.signInRes.days.length?r.showToast({title:"你已完成7日连续签到，获得60积分！",icon:"none",duration:5e3}):r.showToast({title:"签到成功,获得10积分！",icon:"none",duration:5e3});case 14:e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](1),r.hideLoading(),console.error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))()},closeMe:function(n){this.$refs.popup.close()}}});e.default=d}).call(this,t(27)["default"],t(2)["default"])},288:function(n,e,t){"use strict";t.r(e);var r=t(289),o=t.n(r);for(var i in r)["default"].indexOf(i)<0&&function(n){t.d(e,n,(function(){return r[n]}))}(i);e["default"]=o.a},289:function(n,e,t){}}]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component',
    {
        'uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(282))
        })
    },
    [['uni_modules/uni-sign-in/components/uni-sign-in/uni-sign-in-create-component']]
]);
